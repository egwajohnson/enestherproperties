/* ================
  Version 1.0.3
  Nav Replacer for Squarespace 7.1
  This Code is licensed by Will-Myers.com 
=================  */
!function(){if(0!==document.querySelectorAll('[data-wm-plugin="new-nav"]').length){let t=document.querySelector('[data-wm-plugin="new-nav"]');try{t.closest(".sqs-block").classList.add("hide-block")}catch(e){}t.getAttribute("data-site-title"),t.getAttribute("data-nav-links"),t.getAttribute("data-cta"),t.getAttribute("data-social");let a=document.querySelector("#header"),n=a.querySelector(".header-display-desktop #site-title"),r=a.querySelector(".header-display-mobile #site-title"),d=a.querySelector(".header-display-desktop .header-title img"),o=a.querySelector(".header-display-mobile .header-title img"),l=a.querySelector(".header-actions-action--cta .btn"),c=a.querySelector('[data-folder="root"] .header-menu-cta .btn'),i=(a.querySelector(".header-actions-action--social"),a.querySelectorAll('[data-folder="root"] .header-menu-actions > *'),a.querySelector(".header-nav-list")),s=a.querySelector(".header-menu-nav-list");function e(e,t,a){let n=document.createElement("div"),r=document.createElement("a"),d=document.createElement("div"),o=document.createElement("a");if(n.append(r),d.append(o),"collection"===a)n.classList.add("header-nav-item--collection","header-nav-item"),r.href=t,r.textContent=e,d.classList.add("container","header-menu-nav-item","header-menu-nav-item--collection"),o.href=t,o.textContent=e;else if("dropdown"==a){let a=document.createElement("div");a.classList.add("header-nav-folder-content"),n.append(a),n.classList.add("header-nav-item--folder","header-nav-item"),r.classList.add("header-nav-folder-title"),r.href="javascript:void(0)",r.textContent=e;let l=document.createElement("span"),c=document.createElement("span"),i=document.createElement("span");d.classList.add("container","header-menu-nav-item"),o.href=t,o.setAttribute("data-folder-id",t),o.append(l),o.append(c),o.append(i),l.textContent="Folder:",l.classList.add("visually-hidden"),c.textContent=e,i.classList.add("chevron","chevron--right");let u=document.createElement("div"),m=document.createElement("div");u.setAttribute("data-folder",t),u.classList.add("header-menu-nav-folder"),m.classList.add("header-menu-nav-folder-content"),u.append(m),s.append(u);let h=document.createElement("div"),f=document.createElement("a"),p=document.createElement("span"),v=document.createElement("span");h.classList.add("header-menu-controls","container","header-menu-nav-item"),f.classList.add("header-menu-controls-control","header-menu-controls-control--active"),f.tabIndex="-1",f.href="/",f.setAttribute("data-action","back"),p.classList.add("chevron","chevron--left"),v.textContent="Back",f.append(p),f.append(v),h.append(f),m.append(h)}else"dropdown-link"==a?(n.classList.add("header-nav-folder-item"),r.href=t,r.textContent=e):"mobile-folder-item"==a&&(n.classList.add("container","header-menu-nav-item"),r.href=t,r.textContent=e);return[n,d]}let u=document.querySelectorAll('[data-wm-plugin="new-nav"] > div:not(.new-site-title):not(.new-cta)');0!==u.length&&(i.querySelectorAll(".header-nav-item").forEach(e=>{null==e.querySelector('[href="/secondary-nav"]')&&e.remove()}),s.querySelectorAll('[data-folder="root"] .header-menu-nav-item').forEach(e=>{null==e.querySelector('[href="/secondary-nav"]')&&e.remove()}),s.querySelectorAll('[data-folder]:not([data-folder="root"])').forEach(e=>{null==e.querySelector('[href="/secondary-nav"]')&&e.remove()}),u.forEach(t=>{let a,n=t.innerHTML,r=t.getAttribute("href"),d=!!t.classList.contains("new-nav-dropdown");if(d){if(d){let d=s.querySelectorAll("[data-folder]").length,o=(a=e(n=t.getAttribute("data-title"),r="wm-folder-"+d,"dropdown"))[0].querySelector(".header-nav-folder-content");t.querySelectorAll("div").forEach(t=>{let a=t.textContent,n=t.getAttribute("href"),d=e(a,n,"dropdown-link");o.append(d[0]);let l=e(a,n,"mobile-folder-item");s.querySelector('[data-folder="'+r+'"] .header-menu-nav-folder-content').append(l[0])})}}else a=e(n,r,"collection");i.append(a[0]),s.querySelector('[data-folder="root"] .header-menu-nav-folder-content').append(a[1])}),document.querySelectorAll('.header-menu-controls-control[data-action="back"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),document.querySelector('[data-folder="root"]').classList.remove("header-menu-nav-folder--open"),s.querySelector('[data-folder].header-menu-nav-folder--active:not([data-folder="root"])').classList.remove("header-menu-nav-folder--active")})}),document.querySelectorAll('[data-folder="root"] [data-folder-id]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();let a=e.getAttribute("data-folder-id");document.querySelector('[data-folder="root"]').classList.add("header-menu-nav-folder--open"),s.querySelector('[data-folder="'+a+'"]').classList.add("header-menu-nav-folder--active")})}));let m=t.querySelector(".new-cta");if(m){if(!l){let e=document.createElement("div"),t=document.createElement("div");l=document.createElement("a"),c=document.createElement("a"),e.classList.add("header-actions-action","header-actions-action--cta"),t.classList.add("header-menu-cta"),l.classList.add("btn","btn--border"),c.classList.add("btn"),e.append(l),t.append(c);let a=document.querySelector(".header-display-desktop .header-actions"),n=document.querySelector('[data-folder="root"]');a.append(e),n.append(t)}let e=m.textContent,t=m.getAttribute("href");l.textContent=e,l.href=t,c.textContent=e,c.href=t}let h=t.querySelector(".new-site-title");if(h){let e=h.textContent,t=h.getAttribute("data-src-url"),a=h.getAttribute("href");null!==n&&(n.textContent=e,n.href=a),null!==d&&(d.src=t,d.parentElement.href=a),null!==r&&(r.textContent=e,r.href=a),null!==o&&(o.src=t,o.parentElement.href=a)}let f="header-nav-item--active",p=window.location.pathname;document.querySelectorAll(".header-nav-list .header-nav-item").forEach(e=>{let t=e.querySelector("a:not(.header-nav-folder-title)")||e.querySelector("a");p==t.getAttribute("href")&&e.classList.add(f)}),document.querySelector("body").classList.add("new-nav-loaded")}}();